{% load static %}
<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>TFG · Stock</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap básico -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    {% block extra_head %}{% endblock %}
  </head>

  <body class="bg-light">

    <!-- BARRA SUPERIOR FIJA SIN DESPLEGABLE -->
    <header class="bg-white border-bottom">
      <div class="container-fluid d-flex justify-content-between align-items-center py-2 px-5">

        <!-- Logo / texto izquierda -->
        <div class="d-flex align-items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="40" height="40" style="color: #333;">
            <!-- Marco redondeado -->
            <rect x="8" y="8" width="84" height="84" rx="12" fill="none" stroke="currentColor" stroke-width="3"/>
            
            <!-- Barra 1 (pequeña) -->
            <rect x="20" y="60" width="12" height="25" fill="currentColor"/>
            
            <!-- Barra 2 (mediana) -->
            <rect x="44" y="45" width="12" height="40" fill="currentColor"/>
            
            <!-- Barra 3 (grande) -->
            <rect x="68" y="30" width="12" height="55" fill="currentColor"/>
          </svg>
          <span class="fw-bold" style="font-size: 1.1rem;">TFG · Stock</span>
        </div>

        <ul class="nav nav-pills">
  <li class="nav-item">
    <a class="nav-link {% if section == 'dashboard' %}active{% endif %}"
       href="{% url 'dashboard' %}">
      Dashboard
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if section == 'insumos' %}active{% endif %}"
       href="{% url 'lista_insumos' %}">
      Insumos
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if section == 'movimientos' %}active{% endif %}"
       href="{% url 'lista_movimientos' %}">
      Movimientos
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if section == 'ordenes' %}active{% endif %}"
       href="{% url 'lista_ordenes' %}">
      Órdenes de compra
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if section == 'proveedores' %}active{% endif %}"
       href="{% url 'lista_proveedores' %}">
      Proveedores
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if section == 'usuarios' %}active{% endif %}"
       href="{% url 'lista_usuarios' %}">
      Usuarios
    </a>
  </li>

  <li class="nav-item ms-3">
    <form method="post" action="{% url 'logout' %}" style="display: inline;">
      {% csrf_token %}
      <button type="submit" class="nav-link btn border border-2 border-dark rounded-2 px-3 py-1 text-dark fw-semibold" style="cursor: pointer;">
        Cerrar sesion
      </button>
    </form>
  </li>
</ul>


      </div>
    </header>

    <!-- Contenido de cada página -->
    <main class="container mt-4">
      {% if messages %}
        <div class="mb-3" id="flashMessages">
          {% for message in messages %}
            <div class="alert
                        {% if message.tags == 'error' %}alert-danger{% elif message.tags == 'success' %}alert-success{% elif message.tags == 'warning' %}alert-warning{% else %}alert-info{% endif %}
                        alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
      {% block content %}
      {% endblock %}
    </main>

    <!-- JS de Bootstrap (por si lo usás en tablas, modales, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('flashMessages');
        if (!container) return;
        setTimeout(() => {
          container.querySelectorAll('.alert').forEach(alertEl => {
            const bsAlert = bootstrap.Alert.getOrCreateInstance(alertEl);
            bsAlert.close();
          });
        }, 5000);
      });
    </script>
    {% block extra_js %}{% endblock %}
  </body>
</html>

